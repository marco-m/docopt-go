# https://taskfile.dev

version: '3'

tasks:

  clean:
    desc: Delete build artifacts
    cmds: [rm -rf bin/*]

  build:
    desc: Build all the examples and put them in ./bin
    dir: examples
    cmds:
      - |
        for i in *; do
          echo $i
          go build -o ../bin/$i ./$i
        done
    silent: true

  test:
    desc: Run the tests
    cmds:
      - gotestsum -- -coverprofile=bin/cover.out ./...

  browser:
    desc: "Show code coverage in browser (usage: task test:<subtarget> browser)"
    cmds:
      - go tool cover -html=bin/cover.out
